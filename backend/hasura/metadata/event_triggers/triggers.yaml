event_triggers:
  # ============================================================================
  # Anti-Masking Events
  # ============================================================================
  - name: on_fraud_alert_created
    table:
      schema: public
      name: fraud_alerts
    definition:
      enable_manual: true
      insert:
        columns: '*'
    retry_conf:
      num_retries: 3
      interval_sec: 30
      timeout_sec: 60
    webhook: '{{EVENTS_HANDLER_URL}}/fraud-alert-created'
    headers:
      - name: x-hasura-admin-secret
        value_from_env: HASURA_GRAPHQL_ADMIN_SECRET
    comment: Trigger when new fraud alert is created
    
  - name: on_fraud_alert_status_changed
    table:
      schema: public
      name: fraud_alerts
    definition:
      enable_manual: true
      update:
        columns: [status]
    retry_conf:
      num_retries: 3
      interval_sec: 30
      timeout_sec: 60
    webhook: '{{EVENTS_HANDLER_URL}}/fraud-alert-status-changed'
    headers:
      - name: x-hasura-admin-secret
        value_from_env: HASURA_GRAPHQL_ADMIN_SECRET
    comment: Trigger when fraud alert status changes
    
  - name: on_gateway_blacklisted
    table:
      schema: public
      name: gateways
    definition:
      enable_manual: true
      update:
        columns: [is_blacklisted]
    retry_conf:
      num_retries: 3
      interval_sec: 10
      timeout_sec: 30
    webhook: '{{EVENTS_HANDLER_URL}}/gateway-blacklisted'
    comment: Trigger when gateway is blacklisted
    
  # ============================================================================  
  # Remittance Events
  # ============================================================================
  - name: on_transfer_initiated
    table:
      schema: public
      name: remittance_transactions
    definition:
      enable_manual: true
      insert:
        columns: '*'
    retry_conf:
      num_retries: 5
      interval_sec: 60
      timeout_sec: 120
    webhook: '{{EVENTS_HANDLER_URL}}/transfer-initiated'
    comment: Trigger when new transfer is initiated
    
  - name: on_transfer_status_changed
    table:
      schema: public
      name: remittance_transactions
    definition:
      enable_manual: true
      update:
        columns: [status]
    retry_conf:
      num_retries: 5
      interval_sec: 30
      timeout_sec: 60
    webhook: '{{EVENTS_HANDLER_URL}}/transfer-status-changed'
    comment: Trigger when transfer status changes
    
  - name: on_transfer_completed
    table:
      schema: public
      name: remittance_transactions
    definition:
      enable_manual: true
      update:
        columns: [status]
    retry_conf:
      num_retries: 3
      interval_sec: 30
      timeout_sec: 60
    webhook: '{{EVENTS_HANDLER_URL}}/transfer-completed'
    comment: Trigger when transfer is completed
    
  # ============================================================================
  # Marketplace Events  
  # ============================================================================
  - name: on_order_created
    table:
      schema: public
      name: marketplace_orders
    definition:
      enable_manual: true
      insert:
        columns: '*'
    retry_conf:
      num_retries: 3
      interval_sec: 30
      timeout_sec: 60
    webhook: '{{EVENTS_HANDLER_URL}}/order-created'
    comment: Trigger when new marketplace order is created
    
  - name: on_order_status_changed
    table:
      schema: public
      name: marketplace_orders
    definition:
      enable_manual: true
      update:
        columns: [status]
    retry_conf:
      num_retries: 3
      interval_sec: 30
      timeout_sec: 60
    webhook: '{{EVENTS_HANDLER_URL}}/order-status-changed'
    comment: Trigger when marketplace order status changes
    
  # ============================================================================
  # Identity Events
  # ============================================================================
  - name: on_user_registered
    table:
      schema: public
      name: users
    definition:
      enable_manual: true
      insert:
        columns: '*'
    retry_conf:
      num_retries: 3
      interval_sec: 30
      timeout_sec: 60
    webhook: '{{EVENTS_HANDLER_URL}}/user-registered'
    comment: Trigger when new user registers
    
  - name: on_kyc_submitted
    table:
      schema: public
      name: kyc_verifications
    definition:
      enable_manual: true
      insert:
        columns: '*'
    retry_conf:
      num_retries: 3
      interval_sec: 30
      timeout_sec: 60
    webhook: '{{EVENTS_HANDLER_URL}}/kyc-submitted'
    comment: Trigger when KYC verification is submitted
    
  - name: on_kyc_status_changed
    table:
      schema: public
      name: kyc_verifications
    definition:
      enable_manual: true
      update:
        columns: [status]
    retry_conf:
      num_retries: 3
      interval_sec: 30
      timeout_sec: 60
    webhook: '{{EVENTS_HANDLER_URL}}/kyc-status-changed'
    comment: Trigger when KYC status changes
