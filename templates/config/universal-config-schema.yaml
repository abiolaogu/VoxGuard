# Universal Repository Configuration Schema
# This file defines the structure for configuring any repository using this transformation kit

repository:
  name: "{{REPO_NAME}}"  # e.g., my-awesome-project
  type: "{{REPO_TYPE}}"  # e.g., product, service, library, monorepo
  organization: "{{ORG_NAME}}"  # e.g., billyronks

tech_stack:
  primary_language: "{{LANGUAGE}}"  # e.g., python, javascript, dart, go, rust
  framework: "{{FRAMEWORK}}"  # e.g., flutter, react, django, fastapi, express
  package_manager: "{{PACKAGE_MANAGER}}"  # e.g., pip, npm, yarn, pnpm, pub

  # Build configuration
  build:
    enabled: {{BUILD_ENABLED}}  # true/false
    command: "{{BUILD_COMMAND}}"  # e.g., npm run build, flutter build, python setup.py build
    output_dir: "{{BUILD_OUTPUT}}"  # e.g., dist, build, out

  # Test configuration
  test:
    enabled: {{TEST_ENABLED}}  # true/false
    command: "{{TEST_COMMAND}}"  # e.g., pytest, npm test, flutter test
    coverage_enabled: {{COVERAGE_ENABLED}}  # true/false
    coverage_threshold: {{COVERAGE_THRESHOLD}}  # e.g., 80

  # Lint configuration
  lint:
    enabled: {{LINT_ENABLED}}  # true/false
    command: "{{LINT_COMMAND}}"  # e.g., pylint, eslint, dart analyze

# Automation tiers (based on CLAUDE.md constitution)
automation:
  tier_0:
    description: "Documentation, Tests, Text - Auto-Merge"
    enabled: true
    paths:
      - "docs/**"
      - "*.md"
      - "tests/**"
      - "*.txt"
    auto_merge: true
    require_review: false

  tier_1:
    description: "Features, Logic - Request Review"
    enabled: true
    paths:
      - "src/**"
      - "lib/**"
      - "scripts/**"
    auto_merge: false
    require_review: true

  tier_2:
    description: "Auth, Payments, Infra - Require Admin Approval"
    enabled: true
    paths:
      - ".github/workflows/**"
      - "**/auth/**"
      - "**/payment/**"
      - "infrastructure/**"
      - "terraform/**"
      - "k8s/**"
    auto_merge: false
    require_admin: true

# CI/CD settings
ci_cd:
  # Branches to run CI on
  branches:
    - main
    - master
    - develop
    - "feature/**"
    - "fix/**"

  # When to trigger builds
  triggers:
    pull_request: true
    push: true
    schedule: "{{SCHEDULE}}"  # e.g., "0 0 * * *" for daily at midnight

  # Environment variables (references to secrets)
  secrets:
    anthropic_api_key: "ANTHROPIC_API_KEY"
    github_token: "GITHUB_TOKEN"

# Dependencies
dependencies:
  # Automatic dependency updates
  auto_update:
    enabled: {{AUTO_UPDATE_ENABLED}}  # true/false
    schedule: "{{UPDATE_SCHEDULE}}"  # e.g., "0 0 * * 1" for weekly

  # Security scanning
  security_scan:
    enabled: {{SECURITY_SCAN_ENABLED}}  # true/false
    on_pull_request: true

# Market research integration
market_research:
  enabled: {{MARKET_RESEARCH_ENABLED}}  # true/false
  schedule: "{{RESEARCH_SCHEDULE}}"  # e.g., "0 9 * * *" for daily at 9am
  auto_create_issues: true
